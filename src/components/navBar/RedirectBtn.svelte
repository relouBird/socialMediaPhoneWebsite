<script lang="ts">
  import { defineNullDatasImage } from "$lib/Data/addImageOnPost";
  import { uid,currentUser, defineNullStoreDatas } from "$lib/Data/postCreation";
  import { recoverUid,recoverCurrentUser } from "$lib/Data/postCreation";
  import type { user } from "$lib/types/userType";
  import { ROUTES } from "../../config/route";
  export let name: string = "";
  export let link: string = " ";
  export let handleClick : () => void = ()=>{};
  export let active: boolean = false;

  async function doThat(){
    uid.set((await recoverUid()) as string)
    currentUser.set((await recoverCurrentUser()) as user)
    console.log($uid,$currentUser)
  }

</script>

<a
  href={link}
  on:click={()=>{
    handleClick();  
    doThat();
    if(link === ROUTES.post_creation){
      defineNullDatasImage();
      defineNullStoreDatas();
    }
  }}
  class="flex justify-center max-sm:scale-75 items-center rounded bg-[rgb(100,100,100)]/60 px-2 py-2"
>
  {#if name === "Home"}
    <svg
      width="22"
      height="22"
      viewBox="0 0 24 24"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M12.7099 2.29C12.617 2.19627 12.5064 2.12188 12.3845 2.07111C12.2627 2.02034 12.132 1.9942 11.9999 1.9942C11.8679 1.9942 11.7372 2.02034 11.6154 2.07111C11.4935 2.12188 11.3829 2.19627 11.2899 2.29L2.28994 11.29C2.19621 11.383 2.12182 11.4936 2.07105 11.6154C2.02028 11.7373 1.99414 11.868 1.99414 12C1.99414 12.132 2.02028 12.2627 2.07105 12.3846C2.12182 12.5064 2.19621 12.617 2.28994 12.71C2.38338 12.8027 2.49419 12.876 2.61603 12.9258C2.73787 12.9755 2.86833 13.0008 2.99994 13H3.99994V20C3.99994 20.5304 4.21065 21.0391 4.58573 21.4142C4.9608 21.7893 5.46951 22 5.99994 22H17.9999C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7892 21.0391 19.9999 20.5304 19.9999 20V13H20.9999C21.2652 13 21.5195 12.8946 21.707 12.7071C21.8946 12.5196 21.9999 12.2652 21.9999 12C22.0007 11.8684 21.9755 11.7379 21.9257 11.6161C21.8759 11.4943 21.8026 11.3834 21.7099 11.29L12.7099 2.29ZM5.99994 20V10.41L11.9999 4.41L17.9999 10.41V20H5.99994Z"
        fill="rgba(255,255,255,0.7)"
      />
    </svg>
  {:else if name === "Users"}
    <svg
      width="20"
      height="20"
      viewBox="0 0 24 24"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M19 14C21.2091 14 23 16 23 17.5C23 18.3284 22.3284 19 21.5 19H21M17 11C18.6569 11 20 9.65685 20 8C20 6.34315 18.6569 5 17 5M5 14C2.79086 14 1 16 1 17.5C1 18.3284 1.67157 19 2.5 19H3M7 11C5.34315 11 4 9.65685 4 8C4 6.34315 5.34315 5 7 5M16.5 19H7.5C6.67157 19 6 18.3284 6 17.5C6 15 9 14 12 14C15 14 18 15 18 17.5C18 18.3284 17.3284 19 16.5 19ZM15 8C15 9.65685 13.6569 11 12 11C10.3431 11 9 9.65685 9 8C9 6.34315 10.3431 5 12 5C13.6569 5 15 6.34315 15 8Z"
        stroke="rgba(255,255,255,0.7)"
        stroke-width="1.5"
        stroke-linecap="round"
        stroke-linejoin="round"
      />
    </svg>
  {:else if name === "Videos"}
    <svg
      width="23"
      height="23"
      viewBox="0 0 24 24"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M18 7C18 5.897 17.103 5 16 5H4C2.897 5 2 5.897 2 7V17C2 18.103 2.897 19 4 19H16C17.103 19 18 18.103 18 17V13.667L22 17V7L18 10.333V7ZM16.002 17H4V7H16L16.001 11.999L16 12L16.001 12.001L16.002 17Z"
        fill="rgba(255,255,255,0.7)"
      />
    </svg>
  {:else if name === "Create"}
    <svg
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M13 8V16H15V8C15 5.794 13.206 4 11 4H5V20H7V6H11C12.103 6 13 6.897 13 8Z"
        fill="rgba(255,255,255,0.7)"
      />
      <path
        d="M17 16C17 17.103 16.103 18 15 18H11V8H9V20H15C17.206 20 19 18.206 19 16V4H17V16Z"
        fill="rgba(255,255,255,0.7)"
      />
    </svg>
  {:else if name === "Profile"}
    <svg
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M12 2C11.0111 2 10.0444 2.29324 9.22215 2.84265C8.3999 3.39206 7.75904 4.17295 7.3806 5.08658C7.00216 6.00021 6.90315 7.00555 7.09607 7.97545C7.289 8.94536 7.7652 9.83627 8.46447 10.5355C9.16373 11.2348 10.0546 11.711 11.0245 11.9039C11.9945 12.0969 12.9998 11.9978 13.9134 11.6194C14.827 11.241 15.6079 10.6001 16.1573 9.77785C16.7068 8.95561 17 7.98891 17 7C17 5.67392 16.4732 4.40215 15.5355 3.46447C14.5979 2.52678 13.3261 2 12 2ZM12 10C11.4067 10 10.8266 9.82405 10.3333 9.49441C9.83994 9.16476 9.45542 8.69623 9.22836 8.14805C9.0013 7.59987 8.94189 6.99667 9.05764 6.41473C9.1734 5.83279 9.45912 5.29824 9.87868 4.87868C10.2982 4.45912 10.8328 4.1734 11.4147 4.05764C11.9967 3.94189 12.5999 4.0013 13.1481 4.22836C13.6962 4.45542 14.1648 4.83994 14.4944 5.33329C14.8241 5.82664 15 6.40666 15 7C15 7.79565 14.6839 8.55871 14.1213 9.12132C13.5587 9.68393 12.7956 10 12 10ZM21 21V20C21 18.1435 20.2625 16.363 18.9497 15.0503C17.637 13.7375 15.8565 13 14 13H10C8.14348 13 6.36301 13.7375 5.05025 15.0503C3.7375 16.363 3 18.1435 3 20V21H5V20C5 18.6739 5.52678 17.4021 6.46447 16.4645C7.40215 15.5268 8.67392 15 10 15H14C15.3261 15 16.5979 15.5268 17.5355 16.4645C18.4732 17.4021 19 18.6739 19 20V21H21Z"
        fill="rgba(255,255,255,0.7)"
      />
    </svg>
  {/if}
  {#if active}
    <p class="text-sm text-white/70 font-medium pl-1.5">{name}</p>
  {:else}
    <p></p>
  {/if}
</a>
